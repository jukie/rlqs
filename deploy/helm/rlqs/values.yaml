replicaCount: 2

image:
  repository: rlqs-server
  tag: ""  # Defaults to appVersion
  pullPolicy: IfNotPresent

imagePullSecrets: []
nameOverride: ""
fullnameOverride: ""

service:
  type: ClusterIP
  grpcPort: 18081
  metricsPort: 9090

config:
  server:
    grpc_addr: ":18081"
    metrics_addr: ":9090"
  engine:
    default_rps: 100
    reporting_interval: "10s"

podDisruptionBudget:
  minAvailable: 1

autoscaling:
  enabled: false
  minReplicas: 2
  maxReplicas: 10
  targetCPUUtilizationPercentage: 70
  # Scale on rlqs_active_streams custom metric via prometheus-adapter.
  # Requires prometheus-adapter configured with the rule in
  # deploy/prometheus-adapter/values.yaml.
  activeStreams:
    enabled: false
    targetAverageValue: "100"
  # behavior controls scale-up/down velocity (autoscaling/v2 behavior spec).
  behavior: {}
    # scaleDown:
    #   stabilizationWindowSeconds: 300
    #   policies:
    #     - type: Pods
    #       value: 1
    #       periodSeconds: 60
    # scaleUp:
    #   stabilizationWindowSeconds: 0
    #   policies:
    #     - type: Pods
    #       value: 2
    #       periodSeconds: 60

serviceMonitor:
  enabled: false
  interval: "15s"
  labels: {}
  # Additional labels to add to the ServiceMonitor (e.g. for Prometheus
  # Operator selector matching):
  #   release: prometheus

resources:
  limits:
    cpu: 500m
    memory: 256Mi
  requests:
    cpu: 100m
    memory: 128Mi

nodeSelector: {}
tolerations: []

podAnnotations: {}
podLabels: {}

serviceAccount:
  create: true
  name: ""
  annotations: {}

networkPolicy:
  enabled: false
  ingress:
    from: []
    # - namespaceSelector:
    #     matchLabels:
    #       name: envoy-gateway
    # - podSelector:
    #     matchLabels:
    #       app: envoy

topologySpreadConstraints:
  - maxSkew: 1
    topologyKey: topology.kubernetes.io/zone
    whenUnsatisfiable: ScheduleAnyway
    labelSelector:
      matchLabels: {}
